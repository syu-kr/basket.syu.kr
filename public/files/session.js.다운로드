/*===================================================================================================== 업 무 명 := 프로그램 : 세션처리모듈= 화 일 명 : session.js= 작 성 자 : 이기용= 작성일자 : 2011.01.14= 수정일자 : 세션처리 함수 설명 -=====  세션처리 함수 기능 목록 ( 추가시 주석란에 함수를 추가하여 주십시오. ) =======		gfn_SessionUserId       - (GET) 사용자ID	gfn_SessionUserNm       - (GET) 사용자성명	gfn_SetSession          - (SET) 세션 정보	gfn_RemoveSession       - 모든 세션 삭제==================================================================================================== *//*============================================================================*//*  내용 설명  : 세션 정보 관리 GET/*  RETURN 값  : 각 function 에 해당하는 세션 값/*============================================================================*///function gfn_SessionUserId       () { return (gfn_GetServerInfo ( "USER_ID") == ""  ) ? "jdesk" : "" } // 사용자ID//function gfn_SessionUserNm       () { return (gfn_GetServerInfo ( "F_USER_NM") == "") ? "정택상" : "" } // 사용자성명function gfn_SessionCnt             () { return gfn_GetServerInfo("CNT");}     // CNTfunction gfn_SessionUserId          () { return gfn_GetServerInfo("USER_ID");} // 사용자IDfunction gfn_SessionREL_PSN_UNI_NO  () { return gfn_GetServerInfo("REL_PSN_UNI_NO");} // 관계자번호function gfn_SessionUserNm          () { return gfn_GetServerInfo("USER_NM");} // 사용자성명function gfn_SessionLocalIP         () { return gfn_GetServerInfo("LocalIP");} // 사용자성명function fn_session_LocalIP         () { return gfn_GetServerInfo("LocalIP");} // 사용자성명function fn_session_ReturnUrl       () { return gfn_GetServerInfo("RETURN_URL");} // 리턴경로function gfn_CreateRequestObject() {	var req;	try {		// Firefox, Opera, Safari		req = new XMLHttpRequest();	} catch (e) {		// Internet Explorer		try {		//For IE 6			req = new ActiveXObject("Msxml2.XMLHTTP");		} catch (e) {			try {				//For IE 5				req = new ActiveXObject("Microsoft.XMLHTTP");			} catch (e) {				alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');			}		}	}	return req;}var _ss_http = gfn_CreateRequestObject();function gfn_GetServerInfo ( key ) {	var	url  = "/scr/system/ServerInfo.jsp";	    url += "?KEY=" + key;		url += "&GBN=GET_S"; // Get Session	if ( key == "" ) {		return "";	} else {		_ss_http.open( "POST", url, false );		_ss_http.send();		if ( _ss_http.readyState == 4 && _ss_http.status == 200 ) {			var result = (_ss_http.responseText).replace(/(^\s*)|(\s*$)/gi, "");			if ( result == 'null' ) {				result = "";			}						return result;		} else {			return "";		}	}}/*============================================================================*//*  메소드 명  : gfn_SetSession( key, value )/*  내용 설명  : 세션 정보 관리 SET/*  인자		: key   - Session Key 값/*			: value - Session 에 저장할 데이터 값/*  Example	: gfn_SetSession( "USER_ID", "admin" )/*============================================================================*/function  gfn_SetSession ( key, value ) {	var	url  = "/scr/system/ServerInfo.jsp";	    url += "?KEY="   + key  ;		url += "&VALUE=" + value;		url += "&GBN=SET_S"; // Set Session	if ( key == "" ) {		alert( "Session Key is Null" );		return "";	} else {		_ss_http.open( "POST", url, false );		_ss_http.send();		if ( _ss_http.readyState != 4 || _ss_http.status != 200 ) {			alert( "[HTTP Status] : " + _ss_http.status );			return;		}	}}/*============================================================================*//*  메소드 명  : gfn_CheckSession()/*  내용 설명  : 세션 체크 ( 고객번호 없을 시 로그인 화면으로 이동 )/*============================================================================*/function gfn_CheckSession () {		if ( gfn_GetServerInfo ( "USER_ID" ) == ''  ) {		alert("세션 정보가 없습니다.\n다시 로그인 해주십시오.");				//gfn_SessionClose();		//로컬		document.location = "http://sugang.suwings.syu.ac.kr/login.jsp";		//개발		//fn_LogOut();		//gfn_RemoveSession ();				//parent.document.location = "http://portal.sungkyul.ac.kr";		//window.close();		return false;	}			return true;}/*============================================================================*//*  메소드 명  : gfn_CheckSession2()/*  내용 설명  : Work_form.xml에서 세션 체크 ( 고객번호 없을 시 로그인 화면으로 이동 )/*============================================================================*/function gfn_CheckSession2 (user_id) {	if ( gfn_GetServerInfo ( "USER_ID" ) == '' ) {		alert("세션 정보가 없습니다.\n다시 로그인 해주십시오.");				//로컬인 경우		var strURL = "http://sugang.suwings.syu.ac.kr/login.jsp";				parent.document.location = strURL;				//운영		//gfn_RemoveSession ();				//parent.parent.document.location = "http://portal.sungkyul.ac.kr";				return false;	}			if (gfn_GetServerInfo ( "USER_ID" ) != user_id) {		alert("세션 정보와 현재 로그인 정보가 틀립니다.");				//로컬인 경우		var strURL = "http://sugang.suwings.syu.ac.kr/login.jsp";				parent.document.location = strURL;				//운영인 경우		//parent.document.location = "http://portal.sungkyul.ac.kr";				//return false;	}	return true;}/*=========================================================================================*//*  메소드 명	: gfn_SessionClose()/*  내용 설명	: 세션 끊겼을 시 열려있는 팝업을 닫고 로그인 페이지로 이동/*=========================================================================================*/function gfn_SessionClose() {		document.location = "http://sugang.suwings.syu.ac.kr/login.jsp";}/*============================================================================*//*  메소드 명  : gfn_RemoveSession()/*  내용 설명  : 모든 세션 삭제/*============================================================================*/function  gfn_RemoveSession () {	var	url  = "/scr/system/ServerInfo.jsp";	url += "?KEY=";	url += "&VALUE=";	url += "&GBN=DEL_S";	_ss_http.open( "POST", url, false );	_ss_http.send();}function  gfn_SeolSession () {	var	url  = "/scr/system/ServerInfo.jsp";	url += "?KEY=";	url += "&VALUE=";	url += "&GBN=SEOL";	_ss_http.open( "POST", url, false );	_ss_http.send();}/*============================================================================*//*  메소드 명  : fn_session_setSession( key, value )/*  내용 설명  : 세션 정보 관리 SET/*  인자		: key   - Session Key 값/*			: value - Session 에 저장할 데이터 값/*  Example	: gfn_SetSession( "USER_ID", "admin" )/*============================================================================*/function  fn_session_setSession ( key, value ) {	var	url  = "/scr/system/ServerInfo.jsp";	    url += "?KEY="   + key  ;		url += "&VALUE=" + value;		url += "&GBN=SET_S"; // Set Session	if ( key == "" ) {		alert( "Session Key is Null" );		return "";	} else {		_ss_http.open( "POST", url, false );		_ss_http.send();		if ( _ss_http.readyState != 4 || _ss_http.status != 200 ) {			alert( "[HTTP Status] : " + _ss_http.status );			return;		}	}}function fn_session_getSession ( key ) {		var	url  = "/scr/system/ServerInfo.jsp";	    url += "?KEY=" + key;		url += "&GBN=GET_S"; // Get Session	if ( key == "" ) {		return "";	} else {		_ss_http.open( "POST", url, false );		_ss_http.send();		if ( _ss_http.readyState == 4 && _ss_http.status == 200 ) {			var result = (_ss_http.responseText).replace(/(^\s*)|(\s*$)/gi, "");			if ( result == 'null' ) {				result = "";			}						return result;		} else {			return "";		}	}}function fn_mobileYn() {	var uagent = navigator.userAgent.toLowerCase();	return (	(navigator.platform.indexOf("iPad") != -1) ||	(uagent.search("android") != -1)	);}function fn_MoveLoginPage(){			}/*============================================================================*//*  메소드 명  : fn_setSSO( UserID, Pwd )/*  내용 설명  : SSO 토큰 생성/*  인자		: UserID  -  로그인 ID/*			: Pwd - 비밀번호/*============================================================================*/function fn_setSSO (UserID) {    var frm = document.frm;    frm.uid.value = UserID;    frm.submit();}function fn_LogOut() {	var	url  = "/sso/logout.jsp";	document.location = url;}