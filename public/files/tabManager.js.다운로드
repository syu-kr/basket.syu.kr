var TabInfo=function(b,a){this.label=b;this.url=a;this.caseIndex=0;this.frameObj=null};var TabManager=function(){this.id="tabManager1";var b=0;var a=168;this.maxLength=7;this.displayLength=7;this.selectedIndex=0;this.gapWidth=40;this.tabArr=[]};TabManager.prototype={addTab:function(label,url){["TabManager.addTab"];try{for(var i=0;i<this.tabArr.length;i++){var tabInfo=this.tabArr[i];var tmptaburl=tabInfo.url;var idx=tmptaburl.lastIndexOf("#");if(idx>-1){tmptaburl=tmptaburl.substring(0,idx)}var tmpurl=url;idx=tmpurl.lastIndexOf("#");if(idx>-1){tmpurl=tmpurl.substring(0,idx)}if(tmptaburl==tmpurl){this.selectTab(i);if(idx>-1){tabInfo.frameObj.render.setAttribute("src",url);return}return}}var newCaseIndex=this.getEmptyIndex();if(newCaseIndex>=0){var tabInfo=new TabInfo(label,url);tabInfo.caseIndex=newCaseIndex;this.tabArr.push(tabInfo);this.drawTab();this.selectTab(this.tabArr.length-1);tabInfo.frameObj=eval("iframe"+tabInfo.caseIndex);tabInfo.frameObj.setSrc(url)}}catch(e){WebSquare.exception.printStackTrace(e)}},removeTab:function(a){["TabManager.removeTab"];try{a=parseInt(a);if(isNaN(a)||a<0){return}var c=[];for(var b=0;b<this.tabArr.length;b++){if(b==a){this.tabArr[b].frameObj.setSrc("/scr/system/work_blank.xml");this.tabArr[b].frameObj._used="false"}else{c.push(this.tabArr[b])}}this.tabArr=c;this.drawTab();if(a<this.selectedIndex){this.selectTab(this.selectedIndex-1)}else{if(a==this.selectedIndex){if(this.tabArr[this.selectedIndex]){this.selectTab(this.selectedIndex)}else{this.selectTab(this.selectedIndex-1)}}else{if(a>this.selectedIndex){this.selectTab(this.selectedIndex)}}}}catch(d){WebSquare.exception.printStackTrace(d)}},removeAllTab:function(){["TabManager.removeAllTab"];try{while(this.tabArr.length>0){this.removeTab(0)}}catch(a){WebSquare.exception.printStackTrace(a)}},selectTab:function(a){["TabManager.selectTab"];try{a=parseInt(a);if(isNaN(a)||a<0){return}selTabInfo=this.tabArr[a];switchFrameList.setSelectedIndex(selTabInfo.caseIndex);this.selectedIndex=a;if(a>=this.displayLength){var b=this.tabArr[a];var c=this.tabArr.slice(1,this.displayLength);c.push(b);c=c.concat(this.tabArr.slice(this.displayLength,a));c=c.concat(this.tabArr.slice(a+1,this.tabArr.length));c.push(this.tabArr[0]);this.tabArr=c;this.drawTab();this.selectedIndex=this.displayLength-1}this.setSelectedStyle(this.selectedIndex)}catch(d){WebSquare.exception.printStackTrace(d)}},resizeselectTab:function(a){["TabManager.resizeselectTab"];try{a=parseInt(a);if(isNaN(a)||a<0){return}if((this.tabArr[a]!=null)&&(this.tabArr[a]!="undefined")){switchFrameList.setSelectedIndex(this.tabArr[a].caseIndex+1)}this.selectedIndex=a;if(a>=this.displayLength){var b=this.tabArr[a];var c=this.tabArr.slice(1,this.displayLength);c.push(b);c=c.concat(this.tabArr.slice(this.displayLength,a));c=c.concat(this.tabArr.slice(a+1,this.tabArr.length));c.push(this.tabArr[0]);this.tabArr=c;this.drawTab();this.selectedIndex=this.displayLength-1}}catch(d){WebSquare.exception.printStackTrace(d)}},getSelectedIndex:function(){["TabManager.getSelectedIndex"];try{return this.selectedIndex}catch(a){WebSquare.exception.printStackTrace(a)}},showSubTab:function(){["TabManager.showSubTab"];try{groupSubTab.setStyle("height","");groupSubTab2.setStyle("height","");groupSubTab2.setStyle("display","inline")}catch(a){WebSquare.exception.printStackTrace(a)}},hideSubTab:function(){["TabManager.hideSubTab"];try{groupSubTab2.setStyle("display","none")}catch(a){WebSquare.exception.printStackTrace(a)}},setSelectedStyle:function(a){["TabManager.setSelectedStyle"];try{var g=this.tabArr.length;var d=0;if(g>=this.displayLength){d=this.displayLength}else{d=g}for(var c=0;c<d;c++){var b=document.getElementById(this.id+"tab"+c);if(c==a){b.className="tab_selected"}else{b.className="tab_deselected"}}}catch(f){WebSquare.exception.printStackTrace(f)}},setUnSelectedStyle:function(d){["TabManager.setUnSelectedStyle"];try{for(var b=0;b<this.tabArr.length;b++){var a=document.getElementById(this.id+"tab"+b);a.className="tab_deselected"}}catch(c){WebSquare.exception.printStackTrace(c)}},getEmptyIndex:function(){["TabManager.getEmptyIndex"];try{for(var i=0;i<this.maxLength;i++){var frameObj=eval("iframe"+i);if(!frameObj._used||frameObj._used=="false"){frameObj._used="true";return i}}alert("최대 "+this.maxLength+"개의 화면을 호출할 수 있습니다.");return -1}catch(e){WebSquare.exception.printStackTrace(e)}},resizeTab:function(){["TabManager.resizeTab"];try{var f=0;var d=180;if(parseInt(navigator.appVersion)>3){if(navigator.appName=="Netscape"){f=window.innerWidth}if(navigator.appName.indexOf("Microsoft")!=-1){f=document.documentElement.clientWidth}else{f=document.documentElement.offsetWidth}}var a=f-255<=0?100:f-255;groupMainTab.setStyle("width",a+"px");var b=document.getElementById("groupMainTab").style.width;b=parseInt(b.replace("px",""));var g=Math.floor(b/d);if(g<=0){g=1}this.maxLength=7;this.displayLength=g;if(a>0){this.drawTab();this.resizeselectTab(this.selectedIndex)}}catch(c){WebSquare.exception.printStackTrace(c)}},drawTab:function(){["TabManager.drawTab"];try{var c=[];for(var a=0;a<this.tabArr.length&&a<this.displayLength;a++){c.push(this.getMainTabHTML(a))}groupMainTab.setProperty("innerHTML",c.join(""));if(this.tabArr.length<=this.displayLength){}else{}}catch(b){WebSquare.exception.printStackTrace(b)}},resizeMainTab:function(){["TabManager.resizeMainTab"];try{var c=Math.min(this.displayLength,this.tabArr.length);var a=groupMainTab.getProperty("offsetWidth");var b=Math.max(parseInt(a/c)-this.gapWidth,0);var g=[];for(var d=0;d<this.tabArr.length&&d<this.displayLength;d++){g.push(this.getMainTabHTML(d,b))}groupMainTab.setProperty("innerHTML",g.join(""))}catch(f){WebSquare.exception.printStackTrace(f)}},getMainTabHTML:function(a,d){["TabManager.getMainTabHTML"];var c="width:110px;overflow:hidden; text-overflow:ellipsis; white-space:nowrap;";try{var b=this.tabArr[a];var g=[];g.push('<div id="'+this.id+"tab"+a+'" style="display:inline;cursor:pointer;float:left;"><table class="tab_main" style="display:inline;" cellpadding="0" cellspacing="0"><tr>');g.push('<td class="tab_left" style="width:10px;" tabIdx="'+a+'"></td>');g.push('<td class="tab_mid" tabIdx="'+a+'">');g.push('<div style="'+c+'" tabIdx="'+a+'" title="'+this.tabArr[a].label+'">'+this.tabArr[a].label+"</div>");g.push("</td>");g.push('<td class="tab_right" style="width:20px;" tabType="delete" tabIdx="'+a+'" onMouseOut="this.className = \'tab_right\'"></td>');g.push("</tr></table></div>");return g.join("")}catch(f){WebSquare.exception.printStackTrace(f)}},getSubTabHTML:function(a){["TabManager.getSubTabHTML"];try{var b=this.tabArr[a];var d=[];d.push('<div id="mainTab'+a+'" style="">');d.push('<div class="tab_fixed_width" style="width:143px" tabIdx="'+a+'">'+this.tabArr[a].label+"</div>");d.push("</div>");return d.join("")}catch(c){WebSquare.exception.printStackTrace(c)}}};